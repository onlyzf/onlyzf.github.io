{"componentChunkName":"component---src-templates-blog-post-js","path":"/snippets/supervisor/","result":{"data":{"site":{"siteMetadata":{"title":"Fan's life"}},"mdx":{"id":"1a7e72e7-71f0-5f10-b497-6df5381e19e0","excerpt":"Supervisor is a client/server system that allows its users to monitor and control a number of processes on UNIX-like operating systems. Supervisor…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"极简Supervisor\",\n  \"date\": \"2018-10-19T08:22:49Z\",\n  \"tags\": [\"devops\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Supervisor is a client/server system that allows its users to monitor and control a number of processes on UNIX-like operating systems.\"), mdx(\"p\", null, \"Supervisor \\u662F\\u6BD4\\u8F83\\u7B80\\u5355\\u7684\\u521B\\u5EFA\\u5B88\\u62A4\\u8FDB\\u7A0B\\u7684\\u5DE5\\u5177\\uFF0C\\u652F\\u6301 linux \\u548C macOS \\u8FD9\\u4E9B\\u7C7B UNIX \\u7CFB\\u7EDF\\u3002\\n\\u5B83\\u7684\\u4F18\\u52BF\\u5728\\u4E8E\\u6BD4\\u8F83\\u8F7B\\u91CF\\u3001\\u4E0D\\u9700\\u8981 root \\u6743\\u9650\\u3001\\u914D\\u7F6E\\u7B80\\u5355\\u3001\\u8DE8\\u5E73\\u53F0\\u3002\\u5F00\\u53D1\\u65F6\\u6BD4\\u8F83\\u597D\\u7528\\u3002\"), mdx(\"p\", null, \"Supervisor \\u4E3B\\u8981\\u6709 supervisord \\u548C supervisorctl\\uFF0C\\u5206\\u522B\\u662F\\u670D\\u52A1\\u548C\\u63A7\\u5236\\u53F0\\u5DE5\\u5177\\u3002\"), mdx(\"p\", null, \"\\u8BE6\\u7EC6\\u6587\\u6863\\u53C2\\u89C1\\uFF1A\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://supervisord.org/\"\n  }), \"Supervisor\")), mdx(\"h2\", {\n    \"id\": \"最简-supervisordconf\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#%E6%9C%80%E7%AE%80-supervisordconf\",\n    \"aria-label\": \"最简 supervisordconf permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"\\u6700\\u7B80 supervisord.conf\"), mdx(\"p\", null, \"Environment variables that are present in the environment at the time that supervisord is started can be used in the configuration file using the Python string expression syntax %(ENV_X)s.\\nsupervisord \\u542F\\u52A8\\u65F6\\u7684\\u7CFB\\u7EDF\\u73AF\\u5883\\u53D8\\u91CF X \\u7528%(ENV_X)s \\u53EF\\u4EE5\\u53D6\\u5230\\u3002\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://supervisord.org/configuration.html\"\n  }), \"Configuration File\")), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"ini\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-ini\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-ini\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; supervisord.conf\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token selector\"\n  }), \"[include]\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; A space-separated sequence of file globs. Each file glob may be absolute or relative.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; \\u8FD9\\u91CC\\u914D\\u7F6E\\u7684files\\u662F\\u5305\\u542B\\u672C\\u5730\\u76EE\\u5F55\\u6240\\u6709.conf.sample\\u7684\\u6587\\u4EF6\\uFF0C\\u4E5F\\u5C31\\u662F\\u6BCF\\u4E2A\\u670D\\u52A1\\u53EF\\u4EE5\\u5355\\u72EC\\u5EFA\\u4E00\\u4E2Aservice.conf.sample\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; service.conf.sample\\u89C1\\u540E\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token constant\"\n  }), \"files\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token attr-value\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"=\"), \" %(ENV_PWD)s/*.conf.sample\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; The [rpcinterface:supervisor] section must remain in the configuration for the standard setup of supervisor to work properly.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token selector\"\n  }), \"[rpcinterface:supervisor]\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token constant\"\n  }), \"supervisor.rpcinterface_factory\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token attr-value\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"=\"), \" supervisor.rpcinterface:make_main_rpcinterface\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; The configuration file may contain settings for the supervisorctl interactive shell program.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token selector\"\n  }), \"[supervisorctl]\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; The URL that should be used to access the supervisord server, e.g. http://localhost:9001. For UNIX domain sockets, use unix:///absolute/path/to/file.sock.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; supervisorctl\\u8FDE\\u63A5supervisord\\u7684URL\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token constant\"\n  }), \"serverurl\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token attr-value\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"=\"), \" unix:///tmp/supervisor.sock\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; The supervisord.conf file contains a section named [supervisord] in which global settings related to the supervisord process should be inserted. These are as follows.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token selector\"\n  }), \"[supervisord]\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; When supervisord daemonizes, switch to this directory. This option can include the value %(here)s, which expands to the directory in which the supervisord configuration file was found.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; supervisord\\u5207\\u6362\\u81F3conf\\u6587\\u4EF6\\u6240\\u5728\\u76EE\\u5F55\\u8FD0\\u884C\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token constant\"\n  }), \"directory\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token attr-value\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"=\"), \" %(here)s\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; The supervisord.conf file contains a section named [unix_http_server] under which configuration parameters for an HTTP server that listens on a UNIX domain socket should be inserted. If the configuration file has no [unix_http_server] section, a UNIX domain socket HTTP server will not be started.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token selector\"\n  }), \"[unix_http_server]\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; A path to a UNIX domain socket (e.g. /tmp/supervisord.sock) on which supervisor will listen for HTTP/XML-RPC requests. supervisorctl uses XML-RPC to communicate with supervisord over this port.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; supervisord\\u76D1\\u542C\\u7684socket\\uFF0Csupervisorctl\\u9700\\u8981\\u8FDE\\u63A5\\u6B64socket\\u624D\\u80FD\\u63A7\\u5236supervisord\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token constant\"\n  }), \"file\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token attr-value\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"=\"), \" /tmp/supervisor.sock\")))), mdx(\"h2\", {\n    \"id\": \"最简-serviceconfsample\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#%E6%9C%80%E7%AE%80-serviceconfsample\",\n    \"aria-label\": \"最简 serviceconfsample permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"\\u6700\\u7B80 service.conf.sample\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://supervisord.org/configuration.html#program-x-section-settings\"\n  }), \"[program:x] Section Settings\")), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"ini\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-ini\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-ini\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; service.conf.sample\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; The configuration file must contain one or more program sections in order for supervisord to know which programs it should start and control. The header value is composite value. It is the word \\u201Cprogram\\u201D, followed directly by a colon, then the program name.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token selector\"\n  }), \"[program:service]\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; The command that will be run when this program is started. The command can be either absolute (e.g. /path/to/programname) or relative (e.g. programname). If it is relative, the supervisord\\u2019s environment $PATH will be searched for the executable.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token constant\"\n  }), \"command\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token attr-value\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"=\"), \"%(ENV_PWD)s/service --port=8000\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; A list of key/value pairs in the form KEY=\\\"val\\\",KEY2=\\\"val2\\\" that will be placed in the child process\\u2019 environment.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"; \\u8FD9\\u91CC\\u7684\\u914D\\u7F6E\\u662F\\u5C06\\u5B50\\u8FDB\\u7A0B\\u7684\\u65F6\\u533A\\u8BBE\\u4E3AUTC 0\\u65F6\\u533A\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token constant\"\n  }), \"environment\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token attr-value\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"=\"), \"TZ=\\\"UTC\\\"\")))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"极简Supervisor","date":"October 19, 2018","description":null}},"previous":{"fields":{"slug":"/snippets/git/"},"frontmatter":{"title":"Git snippets"}},"next":{"fields":{"slug":"/snippets/dns/"},"frontmatter":{"title":"DNS"}}},"pageContext":{"id":"1a7e72e7-71f0-5f10-b497-6df5381e19e0","previousPostId":"68e2dc36-00cb-5cd3-8f3d-17f446a98705","nextPostId":"40b4d8a5-d8e5-5311-a917-ac2720bcb720"}},"staticQueryHashes":["2841359383","916993862"]}